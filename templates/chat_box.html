<!DOCTYPE html>
<html>
	<head>
		<title>Whatsapp chat</title>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css">
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.js"></script>
		
		<link rel="stylesheet" href="{{ url_for('static', filename='css/chat.css') }}"/>
		<script type="text/javascript" src="{{ url_for('static', filename='js/chat_box_query.js') }}"></script>
		  <style>
    @page {
        size: A3; /* Change from the default size of A4 */
        margin: 0mm; /* Set margin on each page */
      }
    </style>
	</head>
	<body>
				<div class="col-xl-12 chat">
					<div class="">
						<div class="card-header msg_head">
							<div class="d-flex bd-highlight">
    							<div class="img_cont">
    							{% if no_of_users == 2 %}
								<img src="static/dp/{{chat_name_id}}.jpg" class="rounded-circle user_img">
									<span class="online_icon"></span>
								{% else %}
								<img src="static/dp/group.jpg" class="rounded-circle user_img">
									<span class="online_icon"></span>
								{% endif %}
								</div>
								<div class="user_info">
									<span>{{name}}</span>
								</div>
								<div class="video_cam">
									<span><i class="fas fa-video"></i></span>
									<span><i class="fas fa-phone"></i></span>
								</div>				
							</div>
						</div>					
						<div class="card-body ">					
						
						{% for each_chat in chat %}
						{% if each_chat[0] %}
						<div class="d-flex justify-content-center mb-4">
								<div class="msg_cotainer_date">
									{{each_chat[0]}}
								</div>	
							</div>
							
						{% endif %}	
						
						{% if each_chat[2] == 0 %}
							<div class="d-flex justify-content-start mb-4">	
								<div class="img_cont_msg">
									<img src="static/dp/{{each_chat[2]}}.jpg" class="rounded-circle user_img_msg">
								</div>
								
								<div class="msg_cotainer ">
									{{each_chat[3]}}
									{% if (each_chat[3]|length) > 15 %}
									<span class="msg_time">{{each_chat[5]}} &nbsp; &nbsp; {{each_chat[1]}}</span>
									{% else %}
									<span class="msg_time">{{each_chat[1]}}</span>
									{% endif %}
								</div>
														
								{% if each_chat[4] %}
								<div class="d-flex justify-content-start mb-4">
								<div class="col-md-4 col-sm-4 col-xs-4">
									<img src="static/attachments/{{ each_chat[4] }}" class="img-fluid" />
								</div>
								</div>
								{% endif %}
							
							</div>
							{% endif %}	
							
							{% if each_chat[2] == 1 %}
							<div class="d-flex justify-content-end mb-4">
								<div class="msg_cotainer_send">
									{{each_chat[3]}}
									{% if (each_chat[3]|length) > 15 %}
									<span class="msg_time_send">{{each_chat[5]}} &nbsp; &nbsp; {{each_chat[1]}}</span>
									{% else %}
									<span class="msg_time_send">{{each_chat[1]}}</span>
									{% endif %}
								</div>
								
								<div class="img_cont_msg_send">
									<img src="static/dp/{{each_chat[2]}}.jpg" class="rounded-circle user_img_msg">
								</div>
								
								{% if each_chat[4] %}
								<div class="d-flex justify-content-end mb-4">
								<div class="col-md-4 col-sm-4 col-xs-4">
									<img src="static/attachments/{{ each_chat[4] }}" class="img-fluid" />
								</div>
								</div>
								{% endif %}
							</div>
                        {% endif %}	
                        
                        
                        {% if ((each_chat[2] != 0) and (each_chat[2] != 1)) %}
        
							<div class="d-flex justify-content-end mb-4">
    							<div style="background-color:{{color_code[each_chat[2]]}}; margin-top: auto;margin-bottom: auto;margin-right: 10px;border-radius: 25px;padding: 10px;position: relative;">
									{{each_chat[3]}}
									{% if (each_chat[3]|length) > 15 %}
									<span class="msg_time_send">{{each_chat[5]}} &nbsp; &nbsp; {{each_chat[1]}}</span>
									{% else %}
									<span class="msg_time_send">{{each_chat[1]}}</span>
									{% endif %}
								</div>			
								<div class="img_cont_msg">
									<img src="static/dp/{{each_chat[2]}}.jpg" class="rounded-circle user_img_msg">
								</div>									
								{% if each_chat[4] %}
								<div class="d-flex justify-content-end mb-4">
								<div class="col-md-4 col-sm-4 col-xs-4">
									<img src="static/attachments/{{ each_chat[4] }}" class="img-fluid" />
								</div>
								</div>
								{% endif %}
							
							</div>
							{% endif %}						
							{% endfor %}						
						</div>					
						<div class="card-footer">
							<div class="input-group">
								<div class="input-group-append">
									<span class="input-group-text attach_btn"><i class="fas fa-paperclip"></i></span>
								</div>
								<textarea name="" class="form-control type_msg" placeholder="Type your message..."></textarea>
								<div class="input-group-append">
									<span class="input-group-text send_btn"><i class="fas fa-location-arrow"></i></span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
